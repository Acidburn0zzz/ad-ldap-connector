{
  "name": "wsfed",
  "version": "0.0.1",
  "description": "WSFed server middleware",
  "main": "lib/wsfed.js",
  "scripts": {
    "test": "mocha"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/auth0/node-wsfed.git"
  },
  "keywords": [
    "wsfed",
    "saml",
    "auth"
  ],
  "author": {
    "name": "Auth0"
  },
  "license": "mit",
  "dependencies": {
    "saml": "~0.2.0",
    "ejs": "~0.8.3"
  },
  "devDependencies": {
    "chai": "~1.5.0",
    "express": "~3.1.0",
    "mocha": "~1.8.1",
    "request": "~2.14.0",
    "xmldom": "~0.1.13",
    "cheerio": "~0.10.7",
    "xml-crypto": "0.0.10"
  },
  "readme": "WS Federation middleware for node.js.\n\n**This is still preliminary**\n\n## Installation\n\n    npm install wsfed\n\n## Introduction\n\nThis middleware is meant to generate a valid WSFederation endpoint that talks saml.\n\nThe idea is that you will use another mechanism to valida the user first.\n\nThe endpoint supports metadata as well in the url ```/FederationMetadata/2007-06/FederationMetadata.xml```.\n\n## Usage\n\nOptions\n\n| Name                | Description                                      | Default                                      |\n| --------------------|:------------------------------------------------:| --------------------------------------------:|\n| cert                | public key used by this identity provider        | REQUIRED                                     |\n| key                 | private key used by this identity provider       | REQUIRED                                     |\n| callbackUrl         | the callback to post the token                   | REQUIRED                                     |\n| issuer              | the name of the issuer of the token              | REQUIRED                                     |\n| validateAudience    | is this audience valid                           | function(aud, cb) { cb(null); }              |\n| getUserFromRequest  | how to extract the user information from request | function(req) { return req.user; }           |\n| profileMapper       | how to map the user information to claims        | function(prof) { return FromPassport(prof) } |\n\n\nAdd the middleware as follows:\n\n~~~javascript\napp.use('/wsfed', wsfed({\n  issuer:   'the-issuer',\n  callback: 'http://myapp/callback',\n  cert:     fs.readFileSync(path.join(__dirname, 'some-cert.pem')),\n  key:      fs.readFileSync(path.join(__dirname, 'some-cert.key')),\n}));\n~~~~\n\n## Example micro-adfs\n\nThis is a demostration how you can configure something as Active Directory Federation Services (ADFS) with few lines of code by assembling some components.\n\n\n~~~javascript\nvar express = require('express');\nvar http = require('http');\nvar wsfed = require('wsfed');\n\nvar serverSigning = {\n  cert:     fs.readFileSync(path.join(__dirname, 'wsfed.test-cert.pem')),\n  key:      fs.readFileSync(path.join(__dirname, 'wsfed.test-cert.key'))\n};\n\n//configure passport-windowsauth\nvar passport = require('passport');\nvar WindowsStrategy = require('passport-windowsauth');\n\npassport.use(new WindowsStrategy({ \n  ldap: {\n    url:             'ldap://wellscordoba.wellscordobabank.com/DC=wellscordobabank,DC=com',\n    base:            'DC=wellscordobabank,DC=com',\n    bindDN:          'someAccount',\n    bindCredentials: 'andItsPass'\n  }\n}, function(profile, done){\n  done(err, user);\n}));\n\nvar app = express();\n\napp.configure(function(){\n  this.use(express.cookieParser());\n  this.use(express.bodyParser());\n  this.use(express.session({ secret: 'keyboard cat' }));\n  this.use(passport.initialize());\n  this.use(passport.session());\n  this.use('/wsfed',   \n    passport.authenticate('WindowsAuthentication', { session: false }),\n    wsfed({\n      issuer:   'fixture-test',\n      callback: 'http://office.google.com',\n      cert:     serverSigning.cert,\n      key:      serverSigning.key\n    }));\n\n});\n\nvar server = http.createServer(app).listen(5050, callback);\n\n~~~\n\n## License\n\nMIT - AUTH0 2013!",
  "readmeFilename": "README.md",
  "_id": "wsfed@0.0.1",
  "_from": "wsfed@"
}
